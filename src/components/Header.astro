---
const navItems = [
	{ label: 'Home', href: '#' },
	{ label: 'Experience', href: '#experience' },
	{ label: 'Skills', href: '#features' },
	{ label: 'Projects', href: '#projects' },
	{ label: 'Contact', href: '#contact' },
];
---

<header class="fixed w-full top-0 z-50 transition-all duration-300" id="main-header">
	<div class="absolute inset-0 bg-white/70 dark:bg-slate-900/70 backdrop-blur-md border-b border-gray-200 dark:border-white/10 transition-colors duration-300"></div>
	<div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="flex justify-between items-center h-20">
			<!-- Logo -->
			<div class="flex-shrink-0 flex items-center">
				<a href="/" class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600">
					Bach Tran
				</a>
			</div>

			<!-- Desktop Navigation -->
			<nav class="hidden md:flex space-x-8">
				{navItems.map(item => (
					<a href={item.href} class="text-gray-600 dark:text-gray-300 hover:text-slate-900 dark:hover:text-white transition-colors duration-200 text-sm font-medium">
						{item.label}
					</a>
				))}
			</nav>

			<!-- CTA Button -->
			<div class="hidden md:flex items-center">
				<button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-300 hover:text-slate-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/10 focus:outline-none rounded-lg text-sm p-2.5 transition-colors">
					<svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
					<svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
				</button>
			</div>

			<!-- Mobile menu button -->
			<div class="md:hidden flex items-center">
				<button type="button" class="text-gray-500 dark:text-gray-300 hover:text-slate-900 dark:hover:text-white focus:outline-none" aria-controls="mobile-menu" aria-expanded="false">
					<span class="sr-only">Open main menu</span>
					<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
					</svg>
				</button>
			</div>
		</div>
	</div>

	<!-- Mobile menu -->
	<div class="md:hidden hidden bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border-b border-gray-200 dark:border-white/10" id="mobile-menu">
		<div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
			{navItems.map(item => (
				<a href={item.href} class="block px-3 py-2 rounded-md text-base font-medium text-gray-600 dark:text-gray-300 hover:text-slate-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/10">
					{item.label}
				</a>
			))}
			<button id="theme-toggle-mobile" type="button" class="w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-600 dark:text-gray-300 hover:text-slate-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/10 flex items-center">
				<span class="mr-2">Toggle Theme</span>
				<svg id="theme-toggle-dark-icon-mobile" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
				<svg id="theme-toggle-light-icon-mobile" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
			</button>
		</div>
	</div>
</header>

<script>
	const header = document.getElementById('main-header');
	const mobileMenuButton = header?.querySelector('button[aria-controls="mobile-menu"]');
	const mobileMenu = document.getElementById('mobile-menu');

	mobileMenuButton?.addEventListener('click', () => {
		mobileMenu?.classList.toggle('hidden');
	});

	window.addEventListener('scroll', () => {
		if (window.scrollY > 10) {
			header?.classList.add('shadow-lg');
		} else {
			header?.classList.remove('shadow-lg');
		}
	});

	// Theme Toggle Logic
	const themeToggleBtn = document.getElementById('theme-toggle');
	const themeToggleMobileBtn = document.getElementById('theme-toggle-mobile');
	
	const darkIcon = document.getElementById('theme-toggle-dark-icon');
	const lightIcon = document.getElementById('theme-toggle-light-icon');
	const darkIconMobile = document.getElementById('theme-toggle-dark-icon-mobile');
	const lightIconMobile = document.getElementById('theme-toggle-light-icon-mobile');

	// Change the icons inside the button based on previous settings
	if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
		lightIcon?.classList.remove('hidden');
		lightIconMobile?.classList.remove('hidden');
	} else {
		darkIcon?.classList.remove('hidden');
		darkIconMobile?.classList.remove('hidden');
	}

	function toggleTheme() {
		// toggle icons inside button
		darkIcon?.classList.toggle('hidden');
		lightIcon?.classList.toggle('hidden');
		darkIconMobile?.classList.toggle('hidden');
		lightIconMobile?.classList.toggle('hidden');

		// if set via local storage previously
		if (localStorage.getItem('color-theme')) {
			if (localStorage.getItem('color-theme') === 'light') {
				document.documentElement.classList.add('dark');
				localStorage.setItem('color-theme', 'dark');
			} else {
				document.documentElement.classList.remove('dark');
				localStorage.setItem('color-theme', 'light');
			}

		// if NOT set via local storage previously
		} else {
			if (document.documentElement.classList.contains('dark')) {
				document.documentElement.classList.remove('dark');
				localStorage.setItem('color-theme', 'light');
			} else {
				document.documentElement.classList.add('dark');
				localStorage.setItem('color-theme', 'dark');
			}
		}
	}

	themeToggleBtn?.addEventListener('click', toggleTheme);
	themeToggleMobileBtn?.addEventListener('click', toggleTheme);
</script>
